<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŸï¸ Super Rifa de una Xtz 150 y una eco deluxe 0k</title>

<style>
body{font-family:Arial,sans-serif;background:#f2f2f2;margin:0;padding:15px}
h1,h2{text-align:center}
.hero,.card{
  background:#fff;
  padding:16px;
  border-radius:12px;
  margin-bottom:16px;
  box-shadow:0 4px 10px rgba(0,0,0,.08)
}
.hero img{width:100%;border-radius:12px;margin-bottom:10px}
button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  background:#4CAF50;
  color:white;
  font-size:16px;
  cursor:pointer
}
button.secondary{background:#2196F3}
button:disabled{
  opacity:.6;
  cursor:not-allowed;
}
input{width:100%;padding:10px;margin-top:6px;font-size:15px}
.packages{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:10px
}
.resultado{
  margin-top:10px;
  font-size:14px;
  background:#f7f7f7;
  padding:10px;
  border-radius:8px;
}

/* ğŸ”¥ MODAL */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal-box{
  background:#fff;
  width:90%;
  max-width:360px;
  padding:26px;
  border-radius:16px;
  text-align:center;
}

.footer{
  background:#1f2933;
  color:#e5e7eb;
  margin-top:30px;
  padding:22px 15px;
  border-top:4px solid #4CAF50;
}
.footer-content{
  max-width:420px;
  margin:auto;
  text-align:center;
  font-size:13.5px;
  line-height:1.6;
}
.footer-copy{
  margin-top:12px;
  font-size:12px;
  color:#9ca3af;
}
</style>
</head>

<body>

<div class="hero">
  <img id="slide" src="img/Foto1.jpg" alt="Rifa">
  <h1>ğŸŸï¸ GRAN RIFA OFICIAL</h1>
  <p>Una oportunidad real. Elige tus nÃºmeros y participa.</p>
</div>

<div class="card">
  <h2>ğŸ“¦ Paquetes</h2>
  <div class="packages">
    <button onclick="elegir(10,this)">10 nÃºmeros<br>$50.000</button>
    <button onclick="elegir(20,this)">20 nÃºmeros<br>$100.000</button>
    <button onclick="elegir(50,this)">50 nÃºmeros<br>$250.000</button>
    <button onclick="elegir(100,this)">100 nÃºmeros<br>$500.000</button>
    <button onclick="elegir(150,this)">150 nÃºmeros<br>$750.000</button>
  </div>
</div>

<div class="card">
  <h2>âœï¸ Personalizado</h2>
  <input type="number" id="cantidad" min="10" placeholder="MÃ­nimo 10 nÃºmeros">
  <button onclick="personalizado(this)">Continuar</button>
</div>

<div class="modal" id="modalOpciones">
  <div class="modal-box">
    <h2>ğŸ¯ Elige cÃ³mo prefieres tus nÃºmeros</h2>
    <button class="secondary" onclick="azar(this)">ğŸ² Al azar</button>
    <button onclick="seleccionar(this)">âœ‹ Seleccionarlos</button>
  </div>
</div>

<div class="card">
  <h2>ğŸ” Consultar participaciÃ³n</h2>
  <input type="email" id="correoBuscar" placeholder="Correo usado en la compra">
  <button class="secondary" onclick="buscarPorCorreo()">Buscar</button>
  <div id="resultado" class="resultado"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBMKX5fQXRZP-Ic0_Z6yWqD0LBWSn6H2t4",
  authDomain: "rifa-2026-1a341.firebaseapp.com",
  projectId: "rifa-2026-1a341"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.buscarPorCorreo = async function(){
  const correo = correoBuscar.value.trim();
  resultado.innerHTML = "";

  if(!correo){
    resultado.innerHTML = "Ingresa un correo vÃ¡lido";
    return;
  }

  const q = query(collection(db,"compras"), where("correo","==",correo));
  const snap = await getDocs(q);

  if(snap.empty){
    resultado.innerHTML = "No hay registros asociados a este correo";
    return;
  }

  let html="";
  snap.forEach(d=>{
    const c=d.data();
    html+=`ğŸŸ ${c.numeros.join(", ")}<br>ğŸ“Œ ${c.estado}<hr>`;
  });
  resultado.innerHTML=html;
};
</script>

<script>
const fotos=["Foto1.JPG","Foto2.JPG","Foto3.JPG","Foto4.JPG"];
let i=0;
setInterval(()=>slide.src=fotos[i++%fotos.length],3000);

let cantidad=0;
const PRECIO=5000;
const TOTAL=10000;

function bloquear(btn){
  btn.disabled=true;
  btn.innerText="Procesandoâ€¦";
}

function elegir(c,btn){
  bloquear(btn);
  cantidad=c;
  abrirModal();
}

function personalizado(btn){
  const c=+cantidadInput.value;
  if(c<10){alert("MÃ­nimo 10 nÃºmeros");return;}
  bloquear(btn);
  cantidad=c;
  abrirModal();
}

function abrirModal(){
  modalOpciones.style.display="flex";
}

function cerrarModal(){
  modalOpciones.style.display="none";
}

async function azar(btn){
  bloquear(btn);
  cerrarModal();
  localStorage.setItem("cantidad",cantidad);
  localStorage.setItem("total",cantidad*PRECIO);
  location.href="checkout.html";
}

function seleccionar(btn){
  bloquear(btn);
  cerrarModal();
  localStorage.setItem("cantidad",cantidad);
  location.href="seleccionar.html";
}
</script>

<footer class="footer">
  <div class="footer-content">
    <p>ğŸŸï¸ <b>Rifa privada</b></p>
    <p>Los nÃºmeros se asignan por orden de validaciÃ³n.</p>
    <p class="footer-copy">Â© 2026 Â· Todos los derechos reservados</p>
  </div>
</footer>

</body>
</html>
